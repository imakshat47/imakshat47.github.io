<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Akshat Kumar | Resume</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .resume-select {
      margin: 15px 0;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .resume-box {
      margin: 20px 0;
      border: 2px solid var(--primary, #007acc);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      animation: fadeIn 1.5s ease;
    }

    .resume-actions {
      display: flex;
      gap: 15px;
      margin-top: 15px;
    }

    select {
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav>
    <div class="nav-container">
      <h2 class="logo"><a href="index.html">Akshat Kumar</a></h2>
      <ul>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#skills">Skills</a></li>
        <li><a href="index.html#experience">Experience</a></li>
        <li><a href="index.html#projects">Projects</a></li>
        <li><a href="index.html#achievements">Achievements</a></li>
        <li><a href="resume.html">Resume</a></li>
      </ul>
    </div>
  </nav>

  <!-- RESUME SECTION -->
  <section class="container">
    <h2>üìÑ My Resume</h2>
    <p>Select and view different tailored resumes below:</p>

    <!-- Dropdown Selector -->
    <div class="resume-select">
      <label for="resumePicker">Select Resume:</label>
      <select id="resumePicker"></select>
    </div>

    <!-- Resume Viewer -->
    <div class="resume-box">
      <iframe id="resumeFrame" src="" width="100%" height="600px"></iframe>
    </div>

    <div class="resume-actions">
      <a id="viewLink" class="btn" href="#" target="_blank">üîó View Fullscreen</a>
      <a id="downloadLink" class="btn-outline" href="#" download>‚¨áÔ∏è Download</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>‚≠ê Built by Akshat Kumar | <a href="https://github.com/imakshat47">GitHub</a></p>
  </footer>

  <script>
    const picker = document.getElementById("resumePicker");
    const frame = document.getElementById("resumeFrame");
    const viewLink = document.getElementById("viewLink");
    const downloadLink = document.getElementById("downloadLink");
    const basePath = "resume/"; // new base folder

    async function loadResumeList() {
      try {
        const res = await fetch(basePath + "resume-list.json");
        const resumes = await res.json();

        // Populate dropdown
        picker.innerHTML = "";
        resumes.forEach((resume) => {
          const opt = document.createElement("option");
          opt.value = resume.file;
          opt.textContent = resume.name;
          picker.appendChild(opt);
        });

        // Default: imakshat47.pdf if exists, else first in list
        let defaultFile = "imakshat47.pdf";
        let selected = resumes.find(r => r.file === defaultFile) ? defaultFile : resumes[0]?.file;

        if (selected) {
          picker.value = selected;
          loadResume(selected);
        }

        // On change
        picker.addEventListener("change", (e) => {
          loadResume(e.target.value);
        });

      } catch (err) {
        console.error("Error loading resume list:", err);
        document.querySelector(".resume-box").innerHTML =
          "<p>‚ö†Ô∏è Could not load resumes. Check resume-list.json</p>";
      }
    }

    function loadResume(file) {
      const url = basePath + file;
      frame.src = url;
      viewLink.href = url;
      downloadLink.href = url;
    }

    loadResumeList();
  </script>
</body>
</html>
